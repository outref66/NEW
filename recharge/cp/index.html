<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" />
  <title>mobicashservices</title>
  <style>
    *{box-sizing:border-box;font-family:Arial,sans-serif}
    body{margin:0;background:#fff}
    .main-box{width:100%;min-height:100vh;background:#fff}
    .logo-box{text-align:center;padding:20px 10px 10px}
    .logo-box img{height:40px;transition:.3s;cursor:pointer;max-width:100%}
    .form-wrapper{background:#f9f9f9;padding:20px 0}
    .form-content{padding:0 20px;max-width:600px;margin:auto}
    .instruction{font-size:clamp(12px,2.5vw,15px);color:#001F54;line-height:1.4;margin:0 0 8px;text-align:left}

    .payment-line{display:flex;align-items:center;flex-wrap:wrap;margin:6px 0}
    .blue-text{font-size:clamp(12px,2.5vw,15px);color:#001F54}
    .blue-text strong{font-weight:600}
    .copy-icon{display:flex;align-items:center;margin-left:6px;cursor:pointer}
    .copy-icon img{width:18px;height:18px;max-width:100%}
    .copied-text{color:#555;font-size:12px;margin-left:4px;visibility:hidden}
    .copied-text.show{visibility:visible}

    .info-block{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;gap:8px;flex-wrap:wrap}
    .info-label{flex:1;text-align:left;color:#001F54;font-weight:600;
      font-size:clamp(12px,2.5vw,14px);
      line-height:1.3;
      white-space:normal;
      word-break:break-word}
    .info-input{flex:1;width:100%}
    input[type="text"]{width:100%;padding:8px;font-size:clamp(13px,2.5vw,15px);
      border:none;border-top:1px solid #999;border-left:1px solid #999;text-align:center;background:#fff;color:#000}
    .english-numbers{direction:ltr;unicode-bidi:plaintext;text-align:center}

    .upload-block{display:flex;align-items:flex-start;gap:10px;margin-bottom:15px;flex-wrap:wrap}
    .upload-text{flex:1;color:#001F54;font-size:clamp(12px,2.5vw,14px);
      line-height:1.3;white-space:normal;word-break:break-word;text-align:left}
    .note{font-size:clamp(11px,2vw,13px);color:#666;margin-top:4px}
    .upload-flex{display:flex;align-items:center;gap:10px;flex:1;flex-wrap:wrap}
    .upload-section{background:#ccc;width:75px;height:75px;display:flex;align-items:center;justify-content:center}
    .upload-section input[type="file"]{display:none}
    .upload-section label{font-size:32px;color:#fff;cursor:pointer}
    .preview-image{width:75px;height:75px;object-fit:cover;border:1px solid #ccc;display:none}

    .submit-btn{background:#0019d4;color:#fff;font-size:clamp(14px,2.5vw,16px);padding:12px;border:none;width:100%;cursor:pointer;transition:.3s}
    .submit-btn:hover:not(:disabled){background:#0015aa}
    .submit-btn:disabled{background:#999;cursor:not-allowed}
  </style>
</head>
<body>
  <div class="main-box">
    <div class="logo-box"><img src="https://i.postimg.cc/KjyqJ6wD/recharge.png" alt="recharge-logo" /></div>
    <div class="form-wrapper">
      <form class="form-content" id="transferForm">

        <p class="instruction">Avant de faire une demande, veuillez transférer des fonds dans les <strong>10 minutes</strong> en utilisant les informations de paiement ci-dessous.</p>

        <div class="payment-line">
          <span class="blue-text"><strong>CASHPLUS JAWAHER</strong> 0767442227</span>
          <span class="copy-icon" onclick="copyText(this,'0767442227')">
            <img src="https://i.postimg.cc/ZnpNqgK3/file-000000001e9c620a954f9b15e02be3c1.png">
            <span class="copied-text">Copié</span>
          </span>
        </div>

        <div class="payment-line">
          <span class="blue-text"><strong>Motif :</strong> jawaher</span>
          <span class="copy-icon" onclick="copyText(this,'jawaher')">
            <img src="https://i.postimg.cc/ZnpNqgK3/file-000000001e9c620a954f9b15e02be3c1.png">
            <span class="copied-text">Copié</span>
          </span>
        </div>

        <div class="info-block">
          <div class="info-label">Montant (Min 100.00 MAD / Max 5000.00 MAD):</div>
          <div class="info-input"><input type="text" name="amount" class="english-numbers" value="100.00" required></div>
        </div>

        <div class="info-block">
          <div class="info-label">NOM et prénom / الإسم الكامل لصاحب الحساب البنكي:</div>
          <div class="info-input"><input type="text" name="sender_name" id="sender_name" oninput="validateName(this)" required></div>
        </div>

        <div class="upload-block">
          <div class="upload-text">
            <strong>من فضلك قم بتحميل الاسكرين شوت لعمليه التحويل الناجحه:</strong>
            <div class="note">(.jpg, .jpeg, .png, .pdf. Max 20 Mo)</div>
          </div>
          <div class="upload-flex">
            <div class="upload-section"><label for="proof">+</label><input type="file" id="proof" name="proof" required></div>
            <img id="preview" class="preview-image" />
          </div>
        </div>

        <button type="submit" class="submit-btn" id="submitBtn">CONFIRMER</button>
      </form>
    </div>
  </div>

  <input type="text" id="hiddenCopyInput" style="position:absolute;top:-9999px;left:-9999px;" readonly />

  <script>
    function copyText(el,val){if(navigator.clipboard){navigator.clipboard.writeText(val).then(()=>showCopied(el)).catch(()=>fallbackCopy(el,val));}else{fallbackCopy(el,val);}}
    function fallbackCopy(el,val){const i=document.getElementById("hiddenCopyInput");i.value=val;i.select();document.execCommand("copy");showCopied(el);}
    function showCopied(el){const c=el.querySelector(".copied-text");if(c){c.classList.add("show");setTimeout(()=>c.classList.remove("show"),1200);}}
    document.getElementById("proof").addEventListener("change",e=>{const f=e.target.files[0],p=document.getElementById("preview");if(f&&f.type.startsWith("image/")){const r=new FileReader();r.onload=ev=>{p.src=ev.target.result;p.style.display="block"};r.readAsDataURL(f);}else{p.src="";p.style.display="none";}});
    function getSecureURL(){return "https://script.google.com/macros/s/AKfycby_yPgXCCFpvGRQ4Doa1FMfHS4jXd5y8p--fPQAFnADcFI6IcvfPp5WtZjt2GjqXzoneQ/exec";}
    document.getElementById("transferForm").addEventListener("submit",async e=>{e.preventDefault();const f=e.target,a=f.amount.value.trim(),n=f.sender_name.value.trim(),file=document.getElementById("proof").files[0],btn=document.getElementById("submitBtn");if(!file||!n||!a){alert("يرجى ملء جميع الحقول وتحميل الصورة.");return;}btn.disabled=!0;const t=btn.innerText;btn.innerText="جاري الإرسال...";try{const r=new FileReader();r.onloadend=async()=>{const b=r.result,res=await fetch(getSecureURL(),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams({amount:a,fullname:n,imageBase64:b})});if(res.ok){window.location.replace("secure-recharge-cp.html");}else{alert("خطأ أثناء الإرسال");btn.innerText=t;btn.disabled=!1;}};r.readAsDataURL(file);}catch(err){alert("تعذر إرسال الصورة.");btn.innerText=t;btn.disabled=!1;}});
    function validateName(i){i.value=i.value.split("").filter(c=>/^[a-zA-Z\s]$/.test(c)).join("");}
  </script>
</body>
</html>
